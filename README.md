# Agents
这里是AI Agent技术白皮书（Google，2025）的中文版本，目前仍在翻译，鄙人水平有限，若有错误请及时指出，提交issues。下面是正文

备注：agent是代理的意思，AI Agent是自主智能体，通常为了方便读写，Agent也会被称为“智能体”

# 从预测性人工智能到AI Agent（自主智能体）
> 智能体是语言模型的自然演化，并在软件中得到应用。

  人工智能正在发生变革。多年来，人们关注点始终是那些擅长处理被动、离散任务的模型：回答问题、翻译文本或根据提示生成图像。这种范式虽强大，但需要人类在每个步骤中持续指导。如今我们正见证范式转变——人工智能正从单纯预测或生成内容，迈向能够自主解决问题并执行任务的新型软件类别。
  
  这一新领域以AI Agents为核心。Agent并非静态工作流中的简单AI模型，而是具备完整功能的应用程序，能够制定计划并采取行动以达成目标。它融合了语言模型（language model, LM）的推理能力与实际行动能力，从而能够处理单一模型无法应对的复杂、多步骤的任务。其关键能力在于Agent能够自主运作，无需人工全程指导，便能自主推导达成目标所需的后续步骤。

  本文档是五部分系列的第一篇，旨在为开发人员、架构师和产品负责人提供正式指南，帮助他们将概念验证转化为稳健的、生产级代理系统。虽然构建简单原型较为简单，但确保安全性、质量和可靠性却是重大挑战。本文提供全面基础：
  * 核心解剖：将代理分解为三大核心组件：推理模型、可操作工具及管控协调层。
  * 能力分类：将代理从简单的连接问题解决者分类到复杂的协作多代理系统。
  * 架构设计：深入探讨各组件的实际设计考量，涵盖模型选择到工具实现的全流程。
  * 生产构建：建立Agent运维体系，实现从单实例到企业级治理的代理系统评估、调试、安全保障及规模化部署。

  基于之前的[agent白皮书](https://www.kaggle.com/whitepaper-agents)<sup>1</sup>和[agent伴侣](https://www.kaggle.com/whitepaper-agent-companion)<sup>2</sup>，本指南提供了成功构建部署和管理新一代智能应用所需的基础概念与战略框架。这些应用能够通过推理、行动和观察来达到[目标](https://arxiv.org/pdf/2201.11903)<sup>3</sup>

  > 语言难以描述人类与人工智能的交互本质。我们倾向于将人工智能拟人化，使用“思考”、‘推理’、“认知”等人类术语。我们尚未创造出区分“基于语义意义的认知”与“基于最大化奖励函数高概率的认知”的词汇。这两种认知本质不同，但99%以上的情况下结果相同。

# 介绍AI Agents
简而言之，AI agent可定义为由模型、工具、协调层和部署组合而成，通过循环调用语言模型来实现目标。这四个要素构成了任何自主系统的核心架构。
  * 模型（“大脑”）：核心语言模型或基础模型，作为代理的核心推理引擎，负责处理信息、评估选项并作出决策。模型的类型（通用型、微调型或多模态型）决定了代理的认知能力。代理系统是语言模型输入上下文窗口的最终监护人。
  * 工具（“手”）：这些机制将代理的推理能力与外部世界相连，使其能执行超越文本生成的操作。包括API扩展、代码函数及数据存储（如数据库或向量存储），用于获取实时事实信息。代理系统能让语言模型规划工具使用方案，执行工具操作，并将工具结果注入下一次语言模型调用的输入上下文窗口。
  * 协调层（“神经系统”）：该层负责管理代理的运行循环，涵盖规划、记忆（状态）及推理策略执行。通过提示框架与推理技术（如[Chain-of-Thought](https://arxiv.org/pdf/2201.11903)<sup>4</sup>或[ReAct](https://arxiv.org/abs/2210.03629)<sup>5</sup>，将复杂目标分解为步骤，并决定何时进行思考、何时调用工具。同时为Agent提供记忆功能，使其能够“记住”信息。
  * 部署（“身体和腿”）：虽然在笔记本电脑上构建agent程序能有效实现原型开发，但只有投入生产部署才能使其成为可靠且可访问的服务。
这需要将代理部署在安全且可扩展的服务器上，并将其与关键生产服务集成，以实现监控、日志记录和管理功能。部署完成后，用户可通过图形界面访问该代理，其他代理也可通过代理间通信（A2A）API进行程序化访问。

  归根结底，构建生成式AI Agent是开发解决方案以解决任务的一种新方式。传统开发者如同“砌砖工”，需精确定义每个逻辑步骤。而Agent开发者更像导演：不必为每个动作编写显式代码，只需设置场景（指导性指令与提示）、选定演员（工具与API），并提供必要背景（数据）。核心任务转变为引导这个自主“演员”完成预期表演。

  你很快就会发现，语言模型的最大优势——其惊人的灵活性——也正是最令人头疼之处。这种模型无所不能的特性，反而使其难以被可靠且完美地限定在执行某项特定任务上。我们曾称之为“提示工程”、如今称为“上下文工程”的技术，能引导语言模型生成预期输出。每次调用语言模型时，我们需输入指令、事实依据、可用工具、示例、会话历史、用户档案等信息——通过精准填充上下文窗口，获取所需输出。Agent正是管理语言模型输入以完成任务的软件。

  当问题出现时，调试（debugging）变的至关重要。“Agent运维”本质上重新定义了熟悉的测量、分析和系统优化循环。通过追踪和日志，我们可以监控代理的“思维过程”，以识别偏离预期执行路径的情况。随着模型演进与框架升级，开发者的核心职责在于提供关键要素：领域专业知识、明确的人格设定，以及与实用任务执行工具的无缝集成。需谨记：全面评估与测试的结果，往往比初始指令的影响更为重要。

  当Agents被精确配置，配备清晰指令、可靠工具及集成上下文作为记忆库，拥有卓越的用户界面、规划与问题解决能力以及通识世界知识时，它便超越了单纯的“工作流自动化”概念。它开始作为协作实体运作：成为团队中高效、独特适应且能力非凡的新成员。

  >本质上，Agent是专精于上下文窗口管理艺术的系统。它持续循环进行着四步操作：整合上下文、向模型发出指令、观察结果，然后为下一步重新整合上下文。这些上下文可能包含系统指令、用户输入、会话历史、长期记忆、权威来源的知识基础、可用工具清单以及已调用工具的执行结果。这种对模型注意力的精密管理，使其推理能力得以应对新颖情境并达成目标。

# 代理式问题解决过程
  我们已将AI代理定义为一个完整的、以目标为导向的应用程序，集成推理模型、可操作工具和治理协调层。简短版本是“带有工具的LM循环以实现目标”。

  但这个系统究竟如何*运作*？代理从接收到请求到交付结果的整个过程中，具体执行哪些操作？

  本质上，Agent通过持续循环的过程来实现其目标。尽管该循环可能变得极其复杂，但可将其分解为五个基本步骤，具体详见《Agentic System Design》<sup>6</sup>一书：
  1. 获取任务：流程由特定的高层级目标启动。该任务可由用户提供（例如“为团队安排即将召开的会议差旅”），也可由自动化触发器启动（例如“收到一条新的高优先级客户工单”）。
  2. 扫描场景：Agent感知环境以获取上下文信息。这涉及协调层调用可用资源：“用户请求的内容是什么？”“我的短期记忆中有哪些信息？是否已尝试执行此任务？用户上周是否提供过指导？”“我的工具（如日历、数据库或API）能访问哪些资源？”
  3. 深度思考：这是Agent核心的“思考”循环，由推理模型驱动。Agent将**任务**（步骤1）与**场景**（步骤2）进行分析，并制定计划。这并非单一思考，而是推理链条："要预订差旅，我首先需要了解团队成员。我将使用`get_team_roster`工具。接着需通过`calendar_api`查询成员日程。"
  4. 执行行动：协调层执行计划的首个具体步骤。它选择并调用相应**工具**——呼叫API、运行代码函数或查询数据库。这是Agent超越自身内部推理范畴，对外部世界采取行动的环节。
  5. 观察与迭代：Agent观察其行动的结果。`get_team_roster`工具返回包含五个名字的列表。这些新信息被添加到Agent的上下文或“记忆”中。循环随后重复，回到步骤3：“现在我已获取名单，下一步是为这五人查询日历。我将使用`calendar_api`。”
  
  这个“思考、行动、观察”的循环持续进行——由协调层管理，模型进行推理，工具执行操作，直至Agent的内部计划完成且初始任务达成。下面为AI Agent解决问题过程图：
  ![图1：AI Agent解决问题过程](https://github.com/HauUhang/Agents/blob/main/img/Agentic_AI_problem-solving_process.png?raw=true)

  让我们通过一个真实案例，了解客服支持专员如何在以下5步循环中开展工作：

  想象一下一个用户问：“我的订单号12345在哪？”

  Agent不会立即行动，而是先进入“深思熟虑”阶段制定完整策略。它会思考推理出"用户需要查询配送状态。为提供完整答复，我需执行多步计划：
  1. 识别：首先在内部数据库中定位订单，确认其存在并获取详细信息。
  2. 从订单详情中提取物流承运商的追踪号，随后通过外部承运商API查询实时状态。
  3. 反馈：最终将收集的信息整合为清晰有用的用户回复。"
  
  怀揣多步骤计划，Agent开始执行。在首个“执行”阶段，它启动计划第一步，调用`find_order(‘12345’)`工具。系统获取完整订单记录，其中包含追踪号“ZYX987”。

  代理的协调层识别到计划的第一部分已完成，随即进入第二阶段。它通过调用`get_shipping_status(“ZYX987”)`工具执行操作，并观察到新结果：“正在配送中”。

  最后，在成功完成计划中的数据收集阶段后，该代理进入“报告”步骤。它感知到已具备所有必要组件，规划最终消息，并通过生成响应采取行动：“您的订单#12345状态为'正在配送中'！”

# 代理系统分类法
理解五步操作循环是解谜的第一步，第二步是认识到该循环可通过调整复杂度来创建不同类别的代理。对于架构师或产品负责人而言，关键的初始决策在于确定要构建何种类型的代理。

我们可以将代理系统划分为几个广义层级，每个层级都基于前一层级的能力进行构建。
![代理系统五步骤](https://github.com/HauUhang/Agents/blob/main/img/agentic_system_in_5_steps.png?raw=true)

## Level 0: 核心推理系统
  在构建Agent之前，我们必须从最基础的“大脑”形态开始：即推理引擎本身。在此架构中，语言模型（LM）处于孤立运行状态，仅凭海量预训练知识进行响应，不具备任何工具、记忆能力，也无法与实时环境交互。

  其优势在于深度训练赋予的解释能力——既能阐释既定概念，又能制定详尽的解题策略。代价则是完全缺乏实时感知力：对于训练数据之外的事件或事实，它本质上处于“盲视”状态。
  
例如它能阐述职业棒球规则及纽约洋基队的完整历史，但若询问“昨晚洋基队比赛最终比分？”则无法作答——该赛事作为训练数据收集后发生的具体现实事件，其信息根本不存在于模型知识库中。

## Level 1: 互联的解决者
  在此层级，推理引擎通过连接并利用外部工具——即我们架构中的“手”组件——成为功能型Agent。其问题解决能力不再局限于静态预训练知识。

  借助五步循环机制，Agent可解答先前问题。面对“任务”：“昨晚洋基队比赛最终比分是多少？”，其“思考”步骤识别出这是实时数据需求。随后“行动”步骤调用工具（如带日期和关键词的谷歌搜索API），“观察”搜索结果（例如”洋基队5-3获胜"），并将该事实整合为最终答案。

这种与世界交互的基础能力——无论是通过搜索工具获取比分、借助金融API获取实时股价，还是通过检索增强生成（RAG）调用数据库——正是1级Agent的核心能力。

## Level 2: 战略问题解决者
  第二级标志着能力的显著扩展，从执行简单任务转向战略性规划复杂的多阶段目标。此阶段涌现的核心技能是上下文工程：Agent主动筛选、整合并管理计划各阶段最相关信息的能力。

  Agent的准确性取决于聚焦的高质量情境。上下文工程通过精心管理模型有限的注意力，防止信息过载并确保高效运行。
  
  例如，考虑以下“任务”：“**在位于山景城圆形剧场大道1600号的办公室与旧金山市场街1号客户办公室的中间位置，寻找一家优质咖啡馆。**”

  二级代理将开始制定计划：
  1. **思考**：“我必须先找到中点。”
    • **行动**：调用`地图`工具输入两地地址。
    • **观察**：“中点是加州米尔布雷市。”
  2. 思考：“现在要查找米尔布雷市的咖啡馆。用户要求'优质'店铺，因此将筛选四星及以上评分的场所。”
    • **行动**：调用`google_places`工具，查询条件为`query="coffee shop in Millbrae, CA",min_rating=4.0.`(最低评分4.0)（此为上下文工程——系统自动将前一步输出转化为精准搜索查询）
    • **观察**：“检索结果显示'Millbrae Coffee'和'The Daily Grind'。”
  3. 思考：“我将整合这些结果并呈现给用户。”
   
  这种战略规划还能实现主动辅助，例如当代理读取冗长的航班确认邮件时，会提取关键上下文（航班号、日期），并主动将其添加至你的日历。

## Level 3: 协作多代理系统
  在最高层级，范式发生了彻底转变。我们不再致力于构建单一的全能型“超级代理”，而是转向由“专家团队”协同运作的模式——这种模式直接映射了人类组织结构。系统的集体力量正源于这种分工协作。

  在此，Agent将其他Agent视为工具。设想“项目经理”Agent接到一项“任务”：“发布新款'Solaris'耳机”。项目经理Agent不会亲自完成全部工作。它通过为专业化Agents团队创建新任务来执行工作，其运作方式与现实生活中的项目管理如出一辙：
  1. 市场研究Agent任务：“分析降噪耳机的竞争对手定价策略。请于明日提交分析报告。”
  2. 营销Agent任务：“以'Solaris'产品规格表为依据，起草三版新闻稿。”
  3. web开发Agent任务：“根据附件中的设计稿生成新产品页面的HTML代码。”

  这种协作模式虽然目前受限于当今语言模型的推理能力，但代表着从头到尾自动化处理整个复杂业务流程的前沿技术。

## Level 4: 自我进化系统
  第四级标志着从任务分派到自主创造与适应的重大飞跃。在此阶段，智能系统能够识别自身能力缺口，并动态创建新工具甚至新代理来填补空白。它从使用固定资源集转向主动拓展资源边界。

以我们的示例而言，负责“Solaris”项目启动的“项目经理”Agent可能意识到需要监测社交媒体舆论，但其团队中尚无此类工具或代理存在。

  1. **思考（Meta-Reasoning, 元推理）**：“我必须追踪社交媒体上关于'Solaris'的热议，但自身能力不足。”
  2. **行动（自主创建）**：系统未选择失败，而是调用高级AgentCreator工具执行新任务：“创建新代理，监控社交媒体中'Solaris耳机'关键词，执行情感分析并提交每日摘要报告。”
  3. **观察**：全新专业化情绪分析代理即时创建、测试并加入团队，随时准备参与原始任务。

  这种动态扩展自身能力的自主性，使Agents团队蜕变为真正具备学习与进化能力的组织。

# 核心代理架构：模型、工具和协调
我们知道代理的功能以及它的扩展方式。但我们究竟该如何*构建*它呢？从概念到代码的转变，关键在于其三个核心组件的具体架构设计。

## 模型：你的AI Agent的大脑
语言模型是Agent推理的核心，其选择是决定Agent认知能力、运行成本和速度的关键架构决策。然而，若将此选择简单视为挑选基准测试得分最高的模型，往往是通向失败的捷径。Agent在生产环境中的成功，很少取决于通用学术基准测试。

现实世界成功需要一个擅长**代理基础**的模型：卓越**推理**来导航复杂、多步问题，并能可靠运用工具与[世界](https://arxiv.org/abs/2406.12045)<sup>7</sup>交互。

要实现这一目标，需先定义业务问题，再通过直接映射该结果的指标测试模型。若Agent需编写代码，请在私有代码库中测试；若处理保险理赔，则评估其从特定文档格式中提取信息的能力。此类分析还需与成本和延迟等实际因素交叉验证。所谓“最佳”模型，实为在质量、速度与成本三者间找到最优平衡点的[解决方案](https://artificialanalysis.ai/guide)<sup>8</sup>。

您可能选择不止一个模型，一个“专家团队”。您不会用大锤砸核桃。健壮的代理架构可能使用像**Gemini 2.5 Pro**这样的前沿模型进行初始规划和复杂推理的重任，但然后智能地将更简单、高容量的任务——如分类用户意图或总结文本——路由到更快、更具成本效益的模型，如**Gemini 2.5 Flash**。模型路由可能自动或硬编码，但它是优化[性能和成本](https://docs.cloud.google.com/vertex-ai/generative-ai/docs?hl=zh-cn)<sup>9</sup>的关键策略。

相同的原则适用于处理多样数据类型。虽然像[Gemini live mode](https://gemini.google/overview/gemini-live/)<sup>10</sup>这样的本地多模态模型提供处理图像和音频的简化路径，但替代方案是使用专用的工具，如[Cloud Vision API](https://cloud.google.com/vision?e=48754805&hl=en])<sup>11</sup>或[Speech-to-Text API](https://cloud.google.com/speech-to-text?e=48754805&hl=en)<sup>12</sup>。在这种模式中，世界首先转换为文本，然后传递给仅语言模型进行推理。这增加了灵活性，并允许最佳组件，但也引入了显著复杂性。

最后，人工智能领域正处于持续快速演进的状态。今天选择的模型，半年后就会被取代。“设置后置之不理”的心态已难以维系。适应这种现实需要构建敏捷的运营框架——即“智能体运维”[实践](https://medium.com/google-cloud/genaiops-operationalize-generative-ai-a-practical-guide-d5bedaa59d78)<sup>13</sup>。通过强大的持续集成/持续交付管道，持续根据关键业务指标评估新模型，既能降低升级风险又能加速迭代，确保Agent始终搭载最优“大脑”，而无需彻底改造架构。

## 工具：你的AI Agent的手
若模型是Agent的头脑，工具便是连接其推理与现实的双手。它们使Agent能够突破静态训练数据的局限，实时获取信息并在现实世界中采取行动。一个强大的工具接口包含三个环节：定义工具的功能、调用工具，以及观察结果。

以下是Agent构建者将为其代理配备的主要工具类型。如需更全面的深入解析，请参阅本系列中专注于代理工具的白皮书。

## 检索信息：扎根于现实
最基础的工具是访问最新信息的能力。**检索增强生成（RAG）**给代理一个“图书馆卡”来查询外部知识，通常存储在**向量数据库**或**知识图谱**中，从内部公司文档到通过Google搜索的网络知识。对于结构化数据，**自然语言到SQL (NL2SQL)** 工具允许代理查询数据库来回答分析问题，如，“我们上季度最畅销的产品是什么？” 通过在说话前查找事物——无论是在文档还是数据库中——代理将自己扎根于事实，大幅减少幻觉。

## 执行行动：改变世界
代理的真正力量在它们从读取信息转向主动做事时释放。通过将现有**API**和代码函数包装为工具，代理可以发送电子邮件、安排会议，或在ServiceNow中更新客户记录。对于更动态的任务，代理可以**即时编写并执行代码**。在安全的沙箱中，它可以生成SQL查询或Python脚本来解决复杂问题或执行计算，将其从知识丰富的助手转变为[自主行动者](https://cloud.google.com/agent-builder/agent-engine/code-execution/overview)<sup>14</sup>。

这还包括人类交互的工具。代理可以使用**Human in the Loop (HITL)**工具来暂停其工作流并请求确认（例如，`ask_for_confirmation()`）或从用户界面请求特定信息（例如，`ask_for_date_input()`），确保人在关键决策中参与。HITL可以通过SMS文本消息和数据库中的任务实现。

## 函数调用：将工具连接到您的Agent
为了代理可靠地进行“函数调用”并使用工具，它需要清晰的指令、安全连接和[协调](https://ai.google.dev/gemini-api/docs/function-calling?example=meeting&hl=zh-cn)<sup>15</sup>。。长期标准如**OpenAPI**规范提供这一点，给Agent一个结构化合同，描述工具的目的、其所需参数及其预期响应。这个模式让模型每次生成正确的函数调用并解释API响应。对于更简单的发现和工具连接，开放标准如**Model Context Protocol (MCP)**变得流行，因为它们更[方便](https://github.com/modelcontextprotocol/)<sup>16</sup>。此外，一些模型有本地工具，如带有本地Google搜索的Gemini，其中函数调用作为LM调用[本身](https://ai.google.dev/gemini-api/docs/google-search?hl=zh-cn)<sup>17</sup>的一部分发生。

## 协调层
如果模型是Agnet的大脑，工具是它的双手，协调层是连接它们的中央神经系统。它是运行“思考、行动、观察”循环的引擎，是治理代理行为的状态机，是开发人员精心制作的逻辑活起来的地方。这一层不仅仅是管道；它是整个代理交响乐的指挥，决定模型何时应该推理，哪个工具应该行动，以及行动的结果如何告知下一个动作。

## 核心设计选择
首个架构决策是确定Agent的自主程度。这种选择存在于一个连续谱上：一端是确定性、可预测的工作流，将语言模型作为特定任务的工具——如同在现有流程中添加少量人工智能进行增强；另一端则是让语言模型掌控全局，通过动态适应、规划和执行任务来达成目标。

一个并行的选择是实现方法。无代码构建者提供速度和可访问性，使业务用户能够自动化结构化任务并快速构建简单Agent。对于更复杂、任务关键的系统，代码优先框架，如**Google的[代理开发套件（ADK）](https://google.github.io/adk-docs/)**<sup>18</sup>，提供工程师所需深入控制、可定制性和集成能力。

无论采用哪种方法，生产级框架是必不可少的。它必须是**开放**的，允许插入任何模型或工具以防止供应商锁定。它必须提供精确控制，启用混合方法，其中LM的非确定性推理由硬编码业务规则治理。最重要的是，框架必须为**可观察性**而构建。当代理行为异常时，您不能简单地在模型的“想法”中放置断点。鲁棒框架生成详细跟踪和日志，暴露整个推理轨迹：模型的内部独白、它选择的工具、它生成的参数，以及它观察到的结果。

## 用领域知识和角色指导
在这一框架内，开发人员最强大的杠杆是用领域知识和独特角色指导代理。这通过系统提示或一组核心指令实现。这不仅仅是一个简单命令；它是代理的宪法。

在这里，您告诉它，`您是Acme Corp的有帮助客户支持代理，... `并提供约束、期望输出模式、参与规则、特定语调，以及何时以及为什么应该使用其工具的明确指导。指令中的几个示例场景通常非常有效。

## 用上下文增强
Agent的“内存”在运行时被编排到LM上下文窗口中。对于更完整的深入探讨，请参阅本系列中专注代理内存的白皮书。

短期内存是代理的活动“草稿本”，维护当前对话的运行历史。它跟踪正在进行的循环中的（行动、观察）对序列，提供模型决定下一步做什么的即时上下文。这可能被实现为像状态、工件、会话或线程这样的抽象。

长期内存提供跨会话的持久性。从架构上讲，这几乎总是作为另一个专用工具实现——连接到向量数据库或搜索引擎的RAG系统。协调器赋予代理预取和主动查询其自身历史的能力，允许它“记住”用户的偏好或几周前类似任务的结果，以获得真正个性化和连续[体验](https://google.github.io/adk-docs/sessions/memory/)。<sup>19</sup>

## 多代理系统和设计模式
随着任务复杂性的增长，构建单个、全能的“超级代理”变得低效。更有效的解决方案是采用“专家团队”方法，这镜像人类组织。这是**多代理系统**的核心：复杂过程被分割为离散子任务，每个分配给专用的、专业的AI代理。这种分工允许每个代理更简单、更专注、更易构建、测试和维护，这对动态或长期运行的业务过程理想。

架构师可能依赖于经过验证的代理设计模式，虽然代理能力从而模式正在快速[演变](https://docs.cloud.google.com/architecture/choose-design-pattern-agentic-ai-system?hl=zh-cn)。 <sup>20</sup>对于动态或非线性任务，**协调器**模式是必不可少的。它引入一个“经理”代理，分析复杂请求、分割主要任务，并智能地将每个子任务路由到适当的专家代理（如研究员、作家或编码员）。协调器然后聚合每个专家的响应，以制定最终、全面的答案。下图来自以下[链接](cloud.google.com/architecture/choose-design-pattern-agentic-ai-system)的“迭代改进”模式：
![迭代改进](https://github.com/HauUhang/Agents/blob/main/img/iterative_refinement.png?raw=true)

对于更线性工作流，**顺序**模式更合适，像数字装配线，其中一个代理的输出成为下一个的直接输入。其他关键模式关注质量和安全。**迭代细化**模式创建反馈循环，使用“生成器”代理创建内容和“批评者”代理根据质量标准评估它。对于高风险任务，**Human-in-the-Loop (HITL)**模式是关键的，在代理采取重大行动前创建故意暂停以从人获取批准。

## 代理部署和服务
在您构建本地Agent后，您希望将其部署到服务器上，在那里它一直运行，其他人和代理可以使用它。继续我们的比喻，部署和服务将是代理的身体和腿。代理需要几个服务才能有效，会话历史和内存持久性等。作为代理构建者，您还将负责决定记录什么，以及为数据隐私和数据驻留以及法规合规采取什么安全措施。所有这些服务在部署代理到生产时都在范围内。

幸运的是，代理构建者可以依赖于数十年应用程序托管基础设施。代理毕竟是一种新形式的软件，许多相同的原则适用。构建者可以依赖于专为代理设计的部署选项，如**Vertex AI Agent Engine**，它支持运行时和一切都在一个[平台](https://cloud.google.com/agent-builder/agent-engine/overview)<sup>21</sup>
对于希望更直接控制其应用程序栈的软件开发人员，或在现有DevOps基础设施中部署代理，任何代理和大多数代理服务都可以添加到docker容器中，并部署到行业标准运行时，如[Cloud Run或GKE](cloud.google.com/kubernetes-engine/docs/concepts/gke-and-cloud-run)<sup>22</sup>。

下图是[Vertex AI 代理构建器](https://cloud.google.com/vertex-ai/generative-ai/docs/agent-engine/overview)
![Vertex AI 代理构建器](https://github.com/HauUhang/Agents/blob/main/img/vertex_AI_Agent_builder.png?raw=true)

如果您不是软件开发人员和DevOps专家，部署您的第一个代理的过程可能令人生畏。许多代理框架通过部署命令或专用平台使这变得容易，这些应该用于早期探索和入门。提升到安全和生产就绪环境通常需要更大的时间投资和最佳实践的应用，包括[您的代理](https://github.com/GoogleCloudPlatform/agent-starter-pack)<sup>23</sup>的CI/CD和自动化测试。