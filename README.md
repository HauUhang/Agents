# Agents
这里是AI Agent技术白皮书（Google，2025）的中文版本，目前仍在翻译，鄙人水平有限，若有错误请及时指出，提交issues。下面是正文

备注：agent是代理的意思，AI Agent是自主智能体，通常为了方便读写，Agent也会被称为“智能体”

# 从预测性人工智能到AI Agent（自主智能体）
> 智能体是语言模型的自然演化，并在软件中得到应用。

  人工智能正在发生变革。多年来，人们关注点始终是那些擅长处理被动、离散任务的模型：回答问题、翻译文本或根据提示生成图像。这种范式虽强大，但需要人类在每个步骤中持续指导。如今我们正见证范式转变——人工智能正从单纯预测或生成内容，迈向能够自主解决问题并执行任务的新型软件类别。
  
  这一新领域以AI Agents为核心。Agent并非静态工作流中的简单AI模型，而是具备完整功能的应用程序，能够制定计划并采取行动以达成目标。它融合了语言模型（language model, LM）的推理能力与实际行动能力，从而能够处理单一模型无法应对的复杂、多步骤的任务。其关键能力在于Agent能够自主运作，无需人工全程指导，便能自主推导达成目标所需的后续步骤。

  本文档是五部分系列的第一篇，旨在为开发人员、架构师和产品负责人提供正式指南，帮助他们将概念验证转化为稳健的、生产级代理系统。虽然构建简单原型较为简单，但确保安全性、质量和可靠性却是重大挑战。本文提供全面基础：
  * 核心解剖：将代理分解为三大核心组件：推理模型、可操作工具及管控协调层。
  * 能力分类：将代理从简单的连接问题解决者分类到复杂的协作多代理系统。
  * 架构设计：深入探讨各组件的实际设计考量，涵盖模型选择到工具实现的全流程。
  * 生产构建：建立Agent运维体系，实现从单实例到企业级治理的代理系统评估、调试、安全保障及规模化部署。

  基于之前的[agent白皮书](https://www.kaggle.com/whitepaper-agents)<sup>1</sup>和[agent伴侣](https://www.kaggle.com/whitepaper-agent-companion)<sup>2</sup>，本指南提供了成功构建部署和管理新一代智能应用所需的基础概念与战略框架。这些应用能够通过推理、行动和观察来达到[目标](https://arxiv.org/pdf/2201.11903)<sup>3</sup>

  > 语言难以描述人类与人工智能的交互本质。我们倾向于将人工智能拟人化，使用“思考”、‘推理’、“认知”等人类术语。我们尚未创造出区分“基于语义意义的认知”与“基于最大化奖励函数高概率的认知”的词汇。这两种认知本质不同，但99%以上的情况下结果相同。

# 介绍AI Agents
简而言之，AI agent可定义为由模型、工具、协调层和部署组合而成，通过循环调用语言模型来实现目标。这四个要素构成了任何自主系统的核心架构。
  * 模型（“大脑”）：核心语言模型或基础模型，作为代理的核心推理引擎，负责处理信息、评估选项并作出决策。模型的类型（通用型、微调型或多模态型）决定了代理的认知能力。代理系统是语言模型输入上下文窗口的最终监护人。
  * 工具（“手”）：这些机制将代理的推理能力与外部世界相连，使其能执行超越文本生成的操作。包括API扩展、代码函数及数据存储（如数据库或向量存储），用于获取实时事实信息。代理系统能让语言模型规划工具使用方案，执行工具操作，并将工具结果注入下一次语言模型调用的输入上下文窗口。
  * 协调层（“神经系统”）：该层负责管理代理的运行循环，涵盖规划、记忆（状态）及推理策略执行。通过提示框架与推理技术（如[Chain-of-Thought](https://arxiv.org/pdf/2201.11903)<sup>4</sup>或[ReAct](https://arxiv.org/abs/2210.03629)<sup>5</sup>，将复杂目标分解为步骤，并决定何时进行思考、何时调用工具。同时为Agent提供记忆功能，使其能够“记住”信息。
  * 部署（“身体和腿”）：虽然在笔记本电脑上构建agent程序能有效实现原型开发，但只有投入生产部署才能使其成为可靠且可访问的服务。
这需要将代理部署在安全且可扩展的服务器上，并将其与关键生产服务集成，以实现监控、日志记录和管理功能。部署完成后，用户可通过图形界面访问该代理，其他代理也可通过代理间通信（A2A）API进行程序化访问。

  归根结底，构建生成式AI Agent是开发解决方案以解决任务的一种新方式。传统开发者如同“砌砖工”，需精确定义每个逻辑步骤。而Agent开发者更像导演：不必为每个动作编写显式代码，只需设置场景（指导性指令与提示）、选定演员（工具与API），并提供必要背景（数据）。核心任务转变为引导这个自主“演员”完成预期表演。

  你很快就会发现，语言模型的最大优势——其惊人的灵活性——也正是最令人头疼之处。这种模型无所不能的特性，反而使其难以被可靠且完美地限定在执行某项特定任务上。我们曾称之为“提示工程”、如今称为“上下文工程”的技术，能引导语言模型生成预期输出。每次调用语言模型时，我们需输入指令、事实依据、可用工具、示例、会话历史、用户档案等信息——通过精准填充上下文窗口，获取所需输出。Agent正是管理语言模型输入以完成任务的软件。

  当问题出现时，调试（debugging）变的至关重要。“Agent运维”本质上重新定义了熟悉的测量、分析和系统优化循环。通过追踪和日志，我们可以监控代理的“思维过程”，以识别偏离预期执行路径的情况。随着模型演进与框架升级，开发者的核心职责在于提供关键要素：领域专业知识、明确的人格设定，以及与实用任务执行工具的无缝集成。需谨记：全面评估与测试的结果，往往比初始指令的影响更为重要。

  当Agents被精确配置，配备清晰指令、可靠工具及集成上下文作为记忆库，拥有卓越的用户界面、规划与问题解决能力以及通识世界知识时，它便超越了单纯的“工作流自动化”概念。它开始作为协作实体运作：成为团队中高效、独特适应且能力非凡的新成员。

  >本质上，Agent是专精于上下文窗口管理艺术的系统。它持续循环进行着四步操作：整合上下文、向模型发出指令、观察结果，然后为下一步重新整合上下文。这些上下文可能包含系统指令、用户输入、会话历史、长期记忆、权威来源的知识基础、可用工具清单以及已调用工具的执行结果。这种对模型注意力的精密管理，使其推理能力得以应对新颖情境并达成目标。

# 代理式问题解决过程
  我们已将AI代理定义为一个完整的、以目标为导向的应用程序，集成推理模型、可操作工具和治理编排层。简短版本是“带有工具的LM循环以实现目标”。

  但这个系统究竟如何*运作*？代理从接收到请求到交付结果的整个过程中，具体执行哪些操作？

  本质上，Agent通过持续循环的过程来实现其目标。尽管该循环可能变得极其复杂，但可将其分解为五个基本步骤，具体详见《Agentic System Design》<sup>6</sup>一书：
  1. 获取任务：流程由特定的高层级目标启动。该任务可由用户提供（例如“为团队安排即将召开的会议差旅”），也可由自动化触发器启动（例如“收到一条新的高优先级客户工单”）。
  2. 扫描场景：Agent感知环境以获取上下文信息。这涉及协调层调用可用资源：“用户请求的内容是什么？”“我的短期记忆中有哪些信息？是否已尝试执行此任务？用户上周是否提供过指导？”“我的工具（如日历、数据库或API）能访问哪些资源？”
  3. 深度思考：这是Agent核心的“思考”循环，由推理模型驱动。Agent将**任务**（步骤1）与**场景**（步骤2）进行分析，并制定计划。这并非单一思考，而是推理链条："要预订差旅，我首先需要了解团队成员。我将使用`get_team_roster`工具。接着需通过`calendar_api`查询成员日程。"
  4. 执行行动：协调层执行计划的首个具体步骤。它选择并调用相应**工具**——呼叫API、运行代码函数或查询数据库。这是Agent超越自身内部推理范畴，对外部世界采取行动的环节。
  5. 观察与迭代：Agent观察其行动的结果。`get_team_roster`工具返回包含五个名字的列表。这些新信息被添加到Agent的上下文或“记忆”中。循环随后重复，回到步骤3：“现在我已获取名单，下一步是为这五人查询日历。我将使用`calendar_api`。”
  
  这个“思考、行动、观察”的循环持续进行——由协调层管理，模型进行推理，工具执行操作，直至Agent的内部计划完成且初始任务达成。

  ![图1：AI Agent解决问题过程]()